---
export interface Props {
	title: string;
	description: string;
    "unset-footer-position"?: boolean;
}

import Head from "@components/head/Head.astro";
import Navbar from "@components/body/Navbar.astro";
import Footer from "@components/body/Footer.astro";
import { WEBSITE_NAME } from "@config";

const { title, description, "unset-footer-position": unsetposition } = Astro.props;

import { getCurrentLocale } from "@scripts/localeFinder.ts";
const { locale } = getCurrentLocale({url: Astro.url});

import { getConfig } from 'astro/config';
const { i18n } = getConfig();
const supported = i18n.locales;
const defaultLocale = i18n.defaultLocale;
---

<!DOCTYPE html>
<html lang={locale} class="notransition">
  <head>
    <Head title={title != WEBSITE_NAME ? title + " | " + WEBSITE_NAME : title} description={description}></Head>
    <script type="module">
      window.__ASTRO_LOCALES = {
        supported: ${JSON.stringify(supported)},
        default: ${JSON.stringify(defaultLocale)}
      };
    </script>
  </head>
  <body>
    <Navbar/>
		<slot />
    <Footer {unsetposition} />
  </body>
  <script>
    const html = document.documentElement;
    // remove no-transition class on load from html tag
    setTimeout(() => {
      html.classList.remove("notransition");
    }, 100);
  </script>
  <script src="@scripts/inferLanguage.ts"></script>
</html>
